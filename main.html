<!DOCTYPE html>
<html>
<head>
<style>
    #div1 {
        width: 350px;
        height: 200px;
        padding: 10px;
        border: 1px solid black;
        background-color: #f9f9f9;
    }
    #drag1, #drag2, #drag3, #drag4 {
        margin: 5px;
        padding: 10px;
        border: 1px solid black;
        background-color: #e0e0e0;
        cursor: move;
    }
    #code {
        margin-top: 20px;
        padding: 10px;
        border: 1px solid black;
        background-color: #f9f9f9;
        white-space: pre-wrap;
    }
    #properties {
        display: none;
        margin-top: 20px;
    }
</style>
</head>
<body>

<h2>Drag and Drop Demo</h2>

<p>Drag the elements below into the rectangle:</p>

<div id="div1" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
<br>
<p id="drag1" draggable="true" ondragstart="dragStart(event)" onclick="editElement(event)">Draggable Text</p>
<button id="drag2" draggable="true" ondragstart="dragStart(event)" onclick="editElement(event)">Draggable Button</button>
<label id="drag3" draggable="true" ondragstart="dragStart(event)" onclick="editElement(event)">Draggable Label</label>
<select id="drag4" draggable="true" ondragstart="dragStart(event)">
  <option value="option1">Option 1</option>
  <option value="option2">Option 2</option>
</select>

<div id="properties">
    <h3>Edit Element</h3>
    <label for="title">Title:</label><br>
    <input type="text" id="title"><br>
    <label for="functionName">Function Name (for buttons only):</label><br>
    <input type="text" id="functionName"><br>
    <button onclick="saveProperties()">Save</button>
</div>

<script>
    var selectedElement = null;

    function allowDrop(ev) {
        ev.preventDefault();
    }

    function dragStart(ev) {
        ev.dataTransfer.setData("text", ev.target.id);
    }

    function drop(ev) {
        ev.preventDefault();
        var data = ev.dataTransfer.getData("text");
        ev.target.appendChild(document.getElementById(data));
    }

    function editElement(ev) {
        selectedElement = ev.target;
        document.getElementById('title').value = ev.target.innerText;
        document.getElementById('functionName').value = ev.target.getAttribute('data-function-name') || '';
        document.getElementById('properties').style.display = 'block';
    }

    function saveProperties() {
        selectedElement.innerText = document.getElementById('title').value;
        selectedElement.setAttribute('data-function-name', document.getElementById('functionName').value);
        document.getElementById('properties').style.display = 'none';
    }

    function generateCode() {
        var div1 = document.getElementById('div1');
        var pythonCode = 'from tkinter import *\nfrom tkinter import ttk\n\nroot = Tk()\n\n';

        for (var i = 0; i < div1.children.length; i++) {
            var child = div1.children[i];

            if (child.tagName === 'P' || child.tagName === 'LABEL') {
                pythonCode += `Label(root, text="${child.innerText}").pack()\n`;
            } else if (child.tagName === 'BUTTON') {
                var functionName = child.getAttribute('data-function-name');
                pythonCode += `Button(root, text="${child.innerText}", command=${functionName || 'None'}).pack()\n`;
            } else if (child.tagName === 'SELECT') {
                pythonCode += 'cb = ttk.Combobox(root, values=[\n';
                for (var j = 0; j < child.options.length; j++) {
                    pythonCode += `    "${child.options[j].text}",\n`;
                }
                pythonCode += '])\ncb.pack()\n';
            }
        }

        pythonCode += '\nroot.mainloop()';

        // Output the Python code
        var codeElement = document.getElementById('code');
        codeElement.innerText = pythonCode;
    }
</script>

<button onclick="generateCode()">Generate Python Code</button>

<h2>Generated Python Code:</h2>
<pre id="code"></pre>

</body>
</html>
